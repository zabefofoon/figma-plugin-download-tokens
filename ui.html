<style>
  .container {
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }

  #exportEl {
    appearance: none;

    width: 100%;

    padding: 8px 0;

    border-radius: 99px;
    border: 0;

    color: white;
    font-weight: bold;

    background: black;
    box-shadow: 0 2px 5px #ccc;
  }

  .caption {
    font-size: 14px;
  }
</style>
<div class="container">
  <button id="exportEl">Download Tokens</button>
  <span class="caption">Local variables, Local styles</span>
</div>

<script>
  exportEl.onclick = () => {
    parent.postMessage({ pluginMessage: { type: "export" } }, "*")
  }

  window.addEventListener("message", (event) => {
    if (event.data.pluginMessage.type === "download") {
      const jsonString = JSON.stringify(event.data.pluginMessage.content)

      const blob = new Blob([jsonString], { type: "application/json" })

      const url = URL.createObjectURL(blob)
      const link = document.createElement("a")

      link.href = url
      link.download = "token.json"

      link.click()
      URL.revokeObjectURL(url)
    }
  })
</script>
